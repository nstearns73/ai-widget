<script>
  const WORKER_BASE = "https://square-fog-677a.swaydargument.workers.dev";
  const HEALTH = WORKER_BASE + "/health";
  const CHAT = WORKER_BASE + "/chat";

  const btn = document.getElementById("b");
  const out = document.getElementById("out");
  const input = document.getElementById("p");

  const testBtn = document.createElement("button");
  testBtn.textContent = "Test /health";
  testBtn.style.marginLeft = "8px";
  btn.after(testBtn);

  function log(s) {
    out.textContent = s;
  }

  testBtn.onclick = async () => {
    log("HEALTH: starting fetch to:\n" + HEALTH);
    try {
      const r = await fetch(HEALTH);
      const text = await r.text();
      log("HEALTH: HTTP " + r.status + "\n\n" + text);
    } catch (e) {
      log("HEALTH: failed\n" + String(e));
    }
  };

  btn.onclick = async () => {
    log("CHAT: starting fetch to:\n" + CHAT);
    try {
      const r = await fetch(CHAT, {
        method: "POST",
        headers: { "Content-Type": "text/plain; charset=utf-8" },
        body: input.value
      });
      const text = await r.text();
      log("CHAT: HTTP " + r.status + "\n\n" + text);
    } catch (e) {
      log("CHAT: failed\n" + String(e));
    }
  };
</script>


